<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Intermediate JavaScript - The Effective Developer Series</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">
		<link rel="stylesheet" href="css/theme/custom.css">
		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
                
                <!-- Title of presentation -->
				<section>
					<h1>Intermediate JavaScript</h1>
					<h3>Effective Developer Series</h3>
					<p>
						<small>Created by <a href="https://github.com/atomicframeworks" target="_blank">Kevin McGinty</a> & <a href="https://github.com/millerry" target="_blank">Ryan Miller</a><br> <br>
                          <small><a href="https://github.com/atomicframeworks/Effective-Developer-Series-Intermediate-JavaScript" target="_blank">Get the slides</a></small>
                        </small>
					</p>
				</section>
                
                <!-- Executable Code -->
                <section>
                    <section>
                        <h4>Executable Code</h4>
                        <p>
                          <img src="/img/phone.gif"/> <br>
                        </p>
                    </section>
                    <section>
                        <h4>Types of executable code</h4>
                        <div>
                            <ul>
                                <li>Global code</li>
                                <li>Eval code</li>
                                <li>Function code</li>
                                <li>Module code</li>
                            </ul>
                            <small class="caption"><small>
                                Ref: <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-types-of-source-code" target="_blank">ECMAScript Language Specification 6.0 - Types of Executable Code</a>
                            </small></small>
                        </div>
                    </section>
                    <section>
                        <h4>Global Code</h4>
                        <p>
                            "Source text that is treated as an ECMAScript <i>Script</i>. The global code of a particular Script does not include any source text that is parsed as part of a <i>FunctionDeclaration, FunctionExpression, GeneratorDeclaration, GeneratorExpression, MethodDefinition, ArrowFunction, ClassDeclaration,</i> or <i>ClassExpression</i>."
                            <small class="caption"><small>
                                Ref: <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-types-of-source-code" target="_blank">ECMAScript Language Specification 6.0 - Types of Executable Code</a>
                            </small></small>
                        </p>
                    </section>
                    <section>
                        <h4>Global Code Example</h4>
                        <div>
                            <pre class="hljs javascript" data-trim contenteditable>
var a = 'global';
</pre>
                        </div>
                    </section>
                    <section>
                        <h4>Eval Code</h4>
                        <p>
                            "Source text that is treated as an ECMAScript <i>Script</i>. The global code of a particular Script does not include any source text that is parsed as part of a <i>FunctionDeclaration, FunctionExpression, GeneratorDeclaration, GeneratorExpression, MethodDefinition, ArrowFunction, ClassDeclaration,</i> or <i>ClassExpression</i>."
                            <small class="caption"><small>
                                Ref: <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-types-of-source-code" target="_blank">ECMAScript Language Specification 6.0 - Types of Executable Code</a>
                            </small></small>
                        </p>
                    </section>
                    <section>
                        <h4>Eval Code Example</h4>
                        <div>
                            <pre class="hljs javascript" data-trim contenteditable>
eval(
    'var a = "global";'
);
</pre>
                        </div>
                    </section>
                    <section>
                        <h4>Function Code</h4>
                        <div>
                            "Function code is source text that is parsed to supply the value of the [[ECMAScriptCode]] and [[FormalParameters]] internal slots of an ECMAScript function object. The function code of a particular ECMAScript function does not include any source text that is parsed as the function code of a nested <i>FunctionDeclaration, FunctionExpression, GeneratorDeclaration, GeneratorExpression, MethodDefinition, ArrowFunction, ClassDeclaration,</i> or <i>ClassExpression</i>."
                            <small class="caption"><small>
                                Ref: <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-types-of-source-code" target="_blank">ECMAScript Language Specification 6.0 - Types of Executable Code</a>
                            </small></small>
                        </div>
                    </section>
                    <section>
                        <h4>Function Code Example</h4>
                        <div>
                            <pre class="hljs javascript" data-trim contenteditable>
var add = new Function('a', 'b', 'return a + b');
</pre>
                            
                            NOTE! Various ECMAScript language elements cause the creation of ECMAScript function objects - http://www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-language-functions-and-classes
                        </div>
                    </section>
                    <section>
                        <h4>Module Code</h4>
                        <div>
                            "Module code is source text that is code that is provided as a ModuleBody. It is the code that is directly evaluated when a module is initialized. The module code of a particular module does not include any source text that is parsed as part of a nested <i>FunctionDeclaration, FunctionExpression, GeneratorDeclaration, GeneratorExpression, MethodDefinition, ArrowFunction, ClassDeclaration,</i> or <i>ClassExpression</i>."
                            <small class="caption"><small>
                                Ref: <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-types-of-source-code" target="_blank">ECMAScript Language Specification 6.0 - Types of Executable Code</a>
                            </small></small>
                        </div>
                    </section>   
                    <section>
                        <h4>Module Code Example</h4>
                        <div>
                            <pre class="hljs javascript" data-trim contenteditable>
var EXPORTED_SYMBOLS = ["foo"];

function foo() {
  return "foo";
}
</pre>

                            <pre class="hljs javascript" data-trim contenteditable>
Components.utils.import("resource://app/my_module.jsm");

alert(foo());
</pre>                            
                        </div>
                    </section>
                </section>
                
                
                <!-- Execution Context -->
                <section>
                    <section>
                        <h4>Execution Context</h4>
                        <div>
                          <img src="/img/phone.gif"/> <br>
                          <small>Not Scope</small>
                        </div>
                    </section>
                    <section>
                        <h4>So what is it?</h4>
                        <div>
                            <blockquote class="monospaced">
                                &ldquo;An execution context is a specification device that is used to <span class="highlight">track the runtime evaluation of code</span> by an ECMAScript implementation. <span class="fragment">At any point in time, there is at most <span class="highlight">one execution context that is actually executing code</span>.</span> <span class="fragment">This is known as the <span class="highlight">running execution context</span>.</span>&rdquo;
                            </blockquote>
                            
                            <small class="caption"><small>
                                Ref: <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-execution-contexts" target="_blank">ECMAScript Language Specification - Execution Contexts</a>
                            </small></small>
                        </div>
                    </section>
                    <section>
                        <h4>So what is it?</h4>
                        <div>
                            <blockquote class="monospaced">
                                &ldquo;A <span class="highlight">stack</span> is used to track execution contexts. <span class="fragment">The <span class="highlight">running execution context is always the top</span> element of this stack.</span> <span class="fragment">A <span class="highlight">new execution context is created whenever control is transferred</span> from the executable code associated with the currently running execution context to executable code that is not associated with that execution context.</span> <span class="fragment">The newly created execution context is <span class="highlight">pushed onto the stack and becomes the running execution context.</span></span>&rdquo;
                            </blockquote>
                            
                            <small class="caption"><small>
                                Ref: <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-execution-contexts" target="_blank">ECMAScript Language Specification - Execution Contexts</a>
                            </small></small>
                        </div>
                    </section>
                    
                    <section>
                        <h4>TODO - Create image that represents different execution contexts</h4>
                    </section>
                    
                    <section>
                        <h4>Execution context contains 3 things</h4>
                        <div>
                            <ol>
                                <li>
                                    VariableEnvironment
                                </li>
                                <li>
                                    LexicalEnvironment
                                </li>
                                <li>
                                    ThisBinding
                                </li>
                            </ol>
                        </div>
                    </section>   
                </section>
              
                 <!-- VariableEnvironment & LexicalEnvironment -->
                <section>
                    <section>
                        <h4>LexicalEnvironments, VariableEnvironments, and EnvironmentRecords</h4>
                        <div>
                            <img src="/img/phone.gif"/>
                        </div>
                        Oh my!
                    </section>
                    
                    <section>
                        <h4>Lexical Environment</h4>
                        <div>
                           "A Lexical Environment is a specification type used to define the association of Identifiers to specific variables and functions based upon the lexical nesting structure of ECMAScript code. A Lexical Environment consists of an Environment Record and a possibly null reference to an outer Lexical Environment. Usually a Lexical Environment is associated with some specific syntactic structure of ECMAScript code such as a <i>FunctionDeclaration, a BlockStatement,</i> or a <i>Catch</i> clause of a <i>TryStatement</i> and a new Lexical Environment is created each time such code is evaluated."
                            
                            <aside class="notes">Keep in mind this is a definition -- abstract</aside>
                            
                            <small class="caption"><small>
                                Ref: <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-lexical-environments" target="_blank">ECMAScript Language Specification 6.0 - Lexical Environments</a>
                            </small></small>
                        </div>
                    </section>
                    
                    <section>
                        <h4>Contains 2 things</h4>
                        <ol>
                            <li>EnvironmentRecord</li>
                            <li>Reference to the outer environment</li>
                        </ol>
                    </section>
                    
                    <section>
                        <h4>EnvironmentRecord</h4>
                        <div>
                           "An Environment Record records the identifier bindings that are created within the scope of its associated Lexical Environment. It is referred to as the Lexical Environment’s EnvironmentRecord"
                        </div>
                    </section>
                    
                    <section>
                        <div>
                            <div>"The Lexical Environment and Environment Record types are used to explain the behaviour of name resolution in nested functions and blocks."</div>
                            <br>
                            <small class="caption"><small>
                                Ref: <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-lexical-environment-and-environment-record-specification-types" target="_blank">ECMAScript Language Specification 6.0 - Lexical Environment and Environment Record Specification Types</a>
                            </small></small>
                        </div>
                    </section>
                   
                    <section>
                         <pre class="hljs javascript" data-trim contenteditable>
var thing = true;

function double(aNum) {
    var aNumberDoubled = aNum * 2;
}

someFunc(4501);
</pre>
                        <div>Global Context - Environment Record Representation</div>

<pre class="hljs javascript" data-trim contenteditable>
globalEnvironment = {
    environmentRecord: {
 
        // Built-ins, etc.
        Array: function,

        // Our bindings
        thing: true
        double: (pointer to double function)
    },
    outer: null
};
</pre>
                    </section>
                    <section>
                         <pre class="hljs javascript" data-trim contenteditable>
var thing = true;

function double(aNum) {
    var aNumberDoubled = aNum * 2;
}

double(4501);
</pre>
                        <div>Double Context - Environment Record Representation</div>
<pre class="hljs javascript" data-trim contenteditable>
doubleEnvironment = {
    environmentRecord: {
        arguments : {
            0: 4501,
            length : 1,
            callee: (pointer to double function)
        },
        aNum: 4501,
        aNumberDoubled: 9002
    },
    outer: globalEnvironment
};
</pre>
                    </section>
                    
                     
                    <section>
                        <h4>VariableEnvironment</h4>
                        <div>
                            "Identifies the Lexical Environment whose EnvironmentRecord holds bindings created by VariableStatements within this execution context."
                        </div>
                    </section>
                    
                    <section>
                        <h4>LexicalEnvironment</h4>
                        <div>
                           "Identifies the Lexical Environment used to resolve identifier references made by code within this execution context."
                        </div>
                    </section>
                    
                    <section>
                        <h4>Note</h4>
                        <div>
                           "The LexicalEnvironment and VariableEnvironment components of an execution context are always Lexical Environments. When an execution context is created its LexicalEnvironment and VariableEnvironment components initially have the same value."
                            
                            <aside class="notes">
                                "Both VariableEnvironment and LexicalEnvironment by their nature are lexical environments (regardless possible confusion in their naming), i.e. both statically (lexically) captures the outer bindings for inner functions created in the context."
                            </aside>
                        </div>
                    </section>    
                </section>
                
                
                <section>
                    <section>
                        <h4>Back to Execution Contexts!</h4>
                        <div>
                          <img src="/img/phone.gif"/> <br>
                        </div>
                    </section>
                    <section>
                        <h4>Life cycle of Execution Context</h4>
                        <div>
                            <ol>
                                <li>Creation phase</li>
                                <li>Execution phase</li>
                            </ol>
                        </div>
                    </section>
                    <section>
                        <h4>Creation Phase</h4>
                        <div>
                            <ol>
                                <li>Variable Object (VO) is created</li>
                                <li>Arguments object is created</li>
                                <li>
                                    Interpreter creates properties on VO for function declarations
                                    <ul>
                                        <li>If there are multiple definitions for the same function the interpreter will <i>override</i> it</li>
                                    </ul>
                                </li>
                                <li>
                                    Interpreter creates properties on VO for variable declarations
                                    <ul>
                                        <li>If the property already exists on the VO the interpreter will <i>skip</i> it</li>
                                        <li>Even though the property is <i>defined</i> on the VO it is unassgined until execution</li>
                                    </ul>
                                </li>
                                <li>Scope chain is created</li>
                            </ol>                    
                        </div>
                    </section>
                
                </section>
                
                <!-- Identifier Resolution & Scope Chain -->
                <section>
                    <section>
                        <h4>Identifier Resolution & Scope Chain</h4>
                        <div>
                          Title Slide!!<br>
                          <img src="/img/phone.gif"/> <br>
                          <small>Flavor text yo</small>
                        </div>
                    </section>
                    <section>
                        <h4>Identifier Resolution & Scope Chain - more info</h4>
                        <div>
                            Go in to detail on some stuff -- give examples
                        </div>
                    </section>
                </section>



                <!-- Start 'this' Keyword -->
                <section>
                    <section>
                        <p class="hljs-header">Using the Keyword of 'this' in Javascript<br>
                            <img style="height: 50%; width: 50%; " src="img/tug-of-war.jpg"/> <br>
                            <small>'this', that and the other thing</small>
                        </p>
                    </section>

                    <section>
                        <h5>Let's review two important key words:</h5>
                        <h5> Statement Vs Expression </h5>
                            <div class="current-fragment">
                                <ul>
                                    <li><h6 class="fragment">Statements</h6></li>
                                    <div class="fragmented">
                                        <ul>
                                            <li class="fragment">Statements do not generate values, nor do they assign values to an object. Example: </li>
                                        <pre class="fragment hljs javascript" data-trim="false" contenteditable="false">
                                          <li class="fragment"> if (x === 3) //x === 3 is a statement</li>
                                          <li class="fragment">//but, the returned result of the statement is an expression.</li>
                                          <li class="fragment">//(true/false)</li>
                                        </pre>
                                        </ul>
                                    </div>
                                </ul>
                            </div>
                    </section>
                    <section>
                        <div class="current-fragment">
                            <ul>
                                <li><h6 class="fragment">Expressions</h6></li>
                                <div class="fragmented">
                                    <ul>
                                        <li class="fragment">Expressions generate/return values but do not require assignment</li>
                                        <pre class="fragment hljs javascript" data-trim="false" contenteditable="false">
                                        <ul>
                                            <li class="fragment">Examples:</li>
                                            <li class="fragment">var x = 3; // a value is returned</li>
                                            <li class="fragment">1 + 2 //a value is returned</li>
                                        </ul>
                            <aside class="notes">
                                Remember that all objects
                            </aside>
                                        </pre>
                                    </ul>
                                </div>
                            </ul>
                        </div>
                        <br/>
                    </section>

                    <section>
                        <p>Aside: functions are objects, too (as well as function statements and function expressions)</p>
                        <img style="height: 50%; width: 50%; " src="img/placeholder%20for%20functions.png"/> <br>
                    </section>
                    <section>
                        <p>terminology: method vs function</p>
                        <p>Function</p>
                        <p>Method</p>

                        <p> In normal usage. this is prety easy to understand.</p>
                    </section>
                    <section>
                        <p>Watch out for tricky behavior!</p>

                        <p>
When the 'this' keyword is sitting inside of a method (A method is simply a function within an object), 'this' no longer refers to the <strong>global</strong> object. 'this' now refers to the object in
                               which the method resides.
                               An awesome benefit is that one is able to actually access other objects on the instantiated object that 'this' now is pointing to. So, if the object has other properties, like 'name' or 'id',
                               etc. you may call this.id or this.name. (note: If you ask for the property of 'name', JS assumes you mean 'this.name' providing the word 'this' for free..  <b>As long as the variable does not exist in the current scope</b></span>
                            </p>
                    </section>
                    <section>
                        <p> Be careful. Just because 'this' refers to the object it was called from in a method, there are still times where 'this' used inside of that object's code refers to the <b>global</b> 'this'!!!!!! (happens when you create a new function inside of the object that is not a method - ie, you assign the function to a variable inside the object)</p>
                        <p><small>Solution: When creating a method the first thing you should is create a new var called 'self' and assign it to 'this' so it is alwas at the executioin context level of the object, not the global window</small>
                        </p>
                    </section>

                    <section>
                        <pre class="hljs javascript" data-trim="false" contenteditable="true">
function giveVarAValue(value) {
    console.log('-----entering function giveVarAValue-----');
    var a;
    console.log('this = ', this);
    console.log('a = ', a);

                            <span class="fragment">
    a = value;
    console.log('this.a =', this.a);
    console.log('a =', a);
    console.log('-----leaving function giveVarAValue-----');
    return a;
};
                            </span>
                        <span class="fragment">
a = giveVarAValue(44); </span>
                            <span class="fragment">
console.log('after calling giveVarAValue(44):', a); </span>
                            <span class="fragment">
console.log('after calling giveVarAValue(44):', this.a); </span>
                            <span class="fragment">
console.log(this.a === a);
                            </span>
                        </span>
                    </pre>
                    </section>
                    <section>
                        <pre class="hljs javascript" data-trim="false" contenteditable="true">
function giveVarAValue(value) {
    console.log('-----entering function giveVarAValue-----');
    var a;
    console.log('this = ', this);
    console.log('a = ', a);

                            <span class="fragment">
    a = value;
    console.log('this.a =', this.a);
    console.log('a =', a);
    console.log('-----leaving function giveVarAValue-----');
    return a;
};
                            </span>
                        <span class="fragment">
a = giveVarAValue(44); </span>
                            <span class="fragment">
console.log('after calling giveVarAValue(44):', a); </span>
                            <span class="fragment">
console.log('after calling giveVarAValue(44):', this.a); </span>
                            <span class="fragment">
console.log(this.a === a);
                            </span>
                            </span>
                    </pre>
                    </section>
                    <section>
                        <pre class="hljs javascript" data-trim="false" contenteditable="true">
function giveVarAValue(value) {
    console.log('-----entering function giveVarAValue-----');
    var a;
    console.log('this = ', this);
    console.log('a = ', a);

                            <span class="fragment">
    a = value;
    console.log('this.a =', this.a);
    console.log('a =', a);
    console.log('-----leaving function giveVarAValue-----');
    return a;
};
                            </span>
                        <span class="fragment">
a = giveVarAValue(44); </span>
                            <span class="fragment">
console.log('after calling giveVarAValue(44):', a); </span>
                            <span class="fragment">
console.log('after calling giveVarAValue(44):', this.a); </span>
                            <span class="fragment">
console.log(this.a === a);
                            </span>
                            </span>
                    </pre>
                    </section>
                </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
